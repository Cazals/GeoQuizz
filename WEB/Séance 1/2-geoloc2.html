<!doctype html>
<html>
<head>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAWSNSLXM2qISM2-RM01pGghDRFOK6LdLI"></script>

<script>
    var latitude;
    var longitude;
    var altitude;
    var adresse;
    var latlng;
    var marker;
    var geocoder = new google.maps.Geocoder();
    var carte; // servira a stocker l'objet GMap
    // on la met globale car elle risque d'etre utilis�e � diff�rents endroits


    function ajoutermarqueur() {
        latlng = new google.maps.LatLng(latitude, longitude);
        marker = new google.maps.Marker(
            {
                position: new google.maps.LatLng(latitude, longitude),
                title:'Vous etes ici'
            });
        marker.setMap(carte);
    }


    function affichercarte() {

        //objet contenant des propri�t�s avec des identificateurs pr�d�finis dans Google Maps permettant
        //de d�finir des options d'affichage de notre carte
        var options = {
            zoom: 13,
            mapTypeId: google.maps.MapTypeId.SATELLITE
        };

        //constructeur de la carte qui prend en param�tre le conteneur HTML
        //dans lequel la carte doit s'afficher et les options
        carte = new google.maps.Map(document.getElementById("carte"), options);


    }

function geo() {
	if(navigator.geolocation){
		navigator.geolocation.getCurrentPosition(
			function(position){
				 latitude = position.coords.latitude;
				 longitude = position.coords.longitude;
				altitude = position.coords.altitude; // seulement sur firefox

                ajoutermarqueur();
				//document.getElementById('content').innerHTML = 'latitude : ' + latitude + '<br />' + 'longitude : ' + longitude + '<br />';
			  },
			function(error){
				alert(error.message+" / "+error.code);
			}, 
			{ enableHighAccuracy:true, maximumAge:5000, timeout:5000}
		);
		
		
	} else {
		alert('Erreur : pas de support de la géolocalisation dans votre navigateur');
	}
}


    function geocode_callback(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            // results[0].geometry.location est un objet de type LatLng (une position)
            latitude=results[0].geometry.location.lat();
            longitude =results[0].geometry.location.lng();

            ajoutermarqueur();
            //document.getElementById('resultat').innerHTML=
                //results[0].geometry.location.lat()
               // + " / " + results[0].geometry.location.lng();

        } else {
            alert("Erreur Geocode: " + status);
        }
    }

    function getCoordonnees() {

        adresse=document.getElementById("addressss").value ;

        geocoder.geocode
        (
            {	'address': adresse},geocode_callback
        );
    }


</script>
</head>


<body>



<input type="button" onclick="geo();" value="geolocaliser">

<input type="button" onclick="getCoordonnees();" value="get">

<input type="text" id="addressss" value="" />


<div id="carte" style="height: 500px;width:500px"></div>

<script>

    affichercarte();
    </script>

</body>
</html>





